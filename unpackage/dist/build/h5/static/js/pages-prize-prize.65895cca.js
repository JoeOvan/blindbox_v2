(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-prize-prize"],{"24a9":function(e,i,t){"use strict";t.r(i);var a=t("7670"),n=t.n(a);for(var r in a)"default"!==r&&function(e){t.d(i,e,(function(){return a[e]}))}(r);i["default"]=n.a},"39b0":function(e,i,t){"use strict";t.r(i);var a=t("f017"),n=t("24a9");for(var r in n)"default"!==r&&function(e){t.d(i,e,(function(){return n[e]}))}(r);t("8470");var o,s=t("f0c5"),l=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"00d9ae1a",null,!1,a["a"],o);i["default"]=l.exports},6569:function(e,i,t){var a=t("24fb");i=a(!1),i.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */uni-page-body[data-v-00d9ae1a]{background:#fff}.wrapper[data-v-00d9ae1a]{padding-bottom:%?90?%}.intro-cover[data-v-00d9ae1a]{width:%?750?%;height:%?400?%}.intro-cover .cover[data-v-00d9ae1a]{width:100%;height:100%}.prize-list .list-item-wrap[data-v-00d9ae1a]{padding:%?30?% %?15?% 0 %?15?%;display:inline-block}.prize-list .list-item-wrap .list-item[data-v-00d9ae1a]{width:%?220?%;-webkit-box-sizing:border-box;box-sizing:border-box}.prize-list .list-item-wrap .list-item .cover-wrap[data-v-00d9ae1a]{width:%?220?%;height:%?220?%}.prize-list .list-item-wrap .list-item .cover-wrap .cover[data-v-00d9ae1a]{display:inline-block;width:100%;height:100%}.prize-list .list-item-wrap .list-item .name[data-v-00d9ae1a]{font-size:%?28?%;font-weight:400;color:#000;line-height:%?38?%}.shop-info-wrap[data-v-00d9ae1a]{display:-webkit-box;display:-webkit-flex;display:flex;margin:%?15?%;padding:%?20?% 0;background:#fff;border-top:%?1?% solid #ddd;border-bottom:%?1?% solid #ddd}.shop-info-wrap .shop-logo[data-v-00d9ae1a]{display:inline-block;width:%?100?%;height:%?70?%;margin-right:%?15?%;-webkit-flex-shrink:0;flex-shrink:0}.shop-info-wrap .shop-logo .logo[data-v-00d9ae1a]{display:inline-block;width:100%;height:100%}.shop-info-wrap .shop-info .name[data-v-00d9ae1a]{font-size:%?30?%;color:#000}.shop-info-wrap .shop-info .info[data-v-00d9ae1a]{font-size:%?24?%;color:#666}.shop-info-wrap .shop-info .info .info-item[data-v-00d9ae1a]{line-height:%?38?%}.rule-wrap[data-v-00d9ae1a]{margin:%?15?%;padding:%?20?% %?15?%;font-size:%?24?%;font-weight:400;color:#666;line-height:%?50?%;background:#f4f4f4}.rule-wrap .title .sign[data-v-00d9ae1a]{display:inline-block;width:%?6?%;height:%?30?%;margin-right:%?5?%;background:#ccc;vertical-align:middle}.tabbar-wrap[data-v-00d9ae1a]{display:-webkit-box;display:-webkit-flex;display:flex;position:fixed;bottom:0;width:100%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;height:%?90?%;text-align:center;background:#fff;-webkit-box-shadow:0 %?5?% %?15?% %?1?% rgba(0,0,0,.3);box-shadow:0 %?5?% %?15?% %?1?% rgba(0,0,0,.3)}.tabbar-wrap .btn-pay[data-v-00d9ae1a]{width:%?170?%;height:%?50?%;line-height:%?50?%;font-size:%?28?%;font-weight:700;margin:0 auto;color:#fff;background:#fd5c40;border-radius:25px}body.?%PAGE?%[data-v-00d9ae1a]{background:#fff}',""]),e.exports=i},7670:function(e,i,t){"use strict";var a=t("4ea4");t("99af"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,t("96cf");var n=a(t("1da1")),r=(a(t("28cf")),{data:function(){return{prizeInfo:null,baseUrl:this.$url.baseUrl,prizePoolId:null}},onLoad:function(e){this.prizePoolId=e.prizePoolId,this.getPrizePoll(this.prizePoolId)},methods:{getPrizePoll:function(e){var i=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i.$request({url:i.$url.prizePollUrl+e});case 2:a=t.sent,i.prizeInfo=a.data.data;case 4:case"end":return t.stop()}}),t)})))()},getPayPrize:function(e){var i=this;return(0,n.default)(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=uni.getStorageSync("token"),t.next=3,i.$request({url:i.$url.payPrizeUrl+"?prizePoolId="+e,method:"get",header:{"content-type":"application/x-www-form-urlencoded","X-Winzkj-Token":a}});case 3:n=t.sent,console.log(n),i.weChatPayment(n.data.data);case 6:case"end":return t.stop()}}),t)})))()},weChatPayment:function(e){var i=this;this.onBridgeReady(e,(function(t){uni.showToast({title:"支付成功",icon:"none",duration:2e3});var a=i.prizePoolId,n=e.tradeNo;uni.navigateTo({url:"/pages/blindbox/blindbox?prizePoolId=".concat(a,"&tradeNo=").concat(n)})}),(function(e){uni.showToast({title:"支付失败",icon:"none",duration:2e3})}))},onBridgeReady:function(e,i,t){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},(function(e){"get_brand_wcpay_request:ok"==e.err_msg?"function"==typeof i&&i(e):"function"==typeof t&&t(e)}))}}});i.default=r},8470:function(e,i,t){"use strict";var a=t("fe57"),n=t.n(a);n.a},f017:function(e,i,t){"use strict";t.d(i,"b",(function(){return n})),t.d(i,"c",(function(){return r})),t.d(i,"a",(function(){return a}));var a={frImage:t("28cf").default},n=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("v-uni-view",{staticClass:"wrapper"},[t("cu-custom",{attrs:{bgColor:"text-white bg-header",isBack:!0}},[e.prizeInfo?t("template",{attrs:{slot:"backText"},slot:"backText"},[e._v(e._s(e.prizeInfo.title))]):e._e()],2),e.prizeInfo?t("v-uni-view",{staticClass:"intro-cover"},[t("fr-image",{staticClass:"cover",attrs:{src:null!==e.prizeInfo.imgUrl?e.baseUrl+e.prizeInfo.imgUrl:"../../static/images/default-image.jpg","loading-ing-img":"../../static/images/default-image.jpg"}})],1):e._e(),e.prizeInfo?t("v-uni-view",{staticClass:"prize-list"},[e._l(e.prizeInfo.prize,(function(i,a){return[t("v-uni-view",{key:a+"_0",staticClass:"list-item-wrap"},[t("v-uni-view",{staticClass:"list-item"},[t("v-uni-view",{staticClass:"cover-wrap"},[t("fr-image",{staticClass:"cover",attrs:{src:null!==i.imgUrl?e.baseUrl+i.imgUrl:"../../static/images/default-image.jpg","loading-ing-img":"../../static/images/default-image.jpg",mode:"aspectFill"}})],1),t("v-uni-view",{staticClass:"name"},[e._v(e._s(i.name))])],1)],1)]}))],2):e._e(),t("v-uni-view",{staticClass:"shop-info-wrap"},[t("v-uni-view",{staticClass:"shop-logo"},[t("fr-image",{staticClass:"cover",attrs:{src:null!==e.prizeInfo.shop.logoUrl?e.baseUrl+e.prizeInfo.shop.logoUrl:"../../static/images/default-image.jpg","loading-ing-img":"../../static/images/default-image.jpg"}})],1),t("v-uni-view",{staticClass:"shop-info"},[t("v-uni-view",{staticClass:"name"},[e._v(e._s(e.prizeInfo.shop.name))]),t("v-uni-view",{staticClass:"info"},[t("v-uni-view",{staticClass:"info-item"},[e._v("地址："+e._s(e.prizeInfo.shop.address))]),t("v-uni-view",{staticClass:"info-item"},[e._v("电话："+e._s(e.prizeInfo.shop.mobile))])],1)],1)],1),e.prizeInfo?t("v-uni-view",{staticClass:"rule-wrap"},[t("v-uni-view",{staticClass:"title"},[t("v-uni-view",{staticClass:"sign"}),e._v("活动规则说明：")],1),t("v-uni-view",{staticClass:"rule-content",domProps:{innerHTML:e._s(e.prizeInfo.content)}})],1):e._e(),t("v-uni-view",{staticClass:"tabbar-wrap"},[e.prizeInfo?t("v-uni-view",{staticClass:"btn-pay",on:{click:function(i){arguments[0]=i=e.$handleEvent(i),e.getPayPrize(e.prizeInfo.prizePoolId)}}},[e._v(e._s(e.prizeInfo.price)+"元/次")]):e._e()],1)],1)},r=[]},fe57:function(e,i,t){var a=t("6569");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=t("4f06").default;n("181b3c4e",a,!0,{sourceMap:!1,shadowMode:!1})}}]);